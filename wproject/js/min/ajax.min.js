function disableUI(){$(".left, .middle, .right, header").addClass("disable_ui").addClass("blur")}function enableUI(){$(".left, .middle, .right, header").removeClass("disable_ui").removeClass("blur")}jQuery(document).ready(function($){function ResponseSuccess(data){if(response=JSON.parse(data),$("#status-update").removeClass(),$("#status-update").addClass("status"),$("#status-update").css("display","flex"),"success"===response.status)$("#status-update").text(response.message),$("#status-update").addClass("success");else if("task created"===response.status)$("#status-update").text(response.message+" "+response.status),$("#status-update").addClass("success"),$(".new-task-form .submit button").attr("disabled","disabled"),$("#new-task-form")[0].reset(),$('.new-task-form select[name="task_related"]').removeAttr("required"),$(".new-task-form .subtask-items li").remove(),$(".new-task-form label").removeClass("selected"),$(".new-task-form input").focus(function(){$(".new-task-form .submit button").removeAttr("disabled")}),$(".right ul").prepend('<li><a href="'+response.data+'"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-check-square feather-icon" color="#ff9800"><polyline points="9 11 12 14 22 4"></polyline><path d="M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11"></path></svg><span class="spawn">'+response.message+"</span></a></li>");else if("success-theme-switched"===response.status)$("#status-update").text(response.message),$("#status-update").addClass("success");else if("success-files-deleted"===response.status)$(".files").remove(),$(".tab-nav .files").remove(),$("#manage-files .delete-all-files, #manage-files .download-all-files").remove(),$(".tab-nav .task-specs").addClass("active"),$(".tab-content .task-specs").addClass("active"),$(".tabby .tab-content").css("display","block"),$("#status-update").text(response.message);else if("success-files-downloading"===response.status)$("#status-update").text(response.message);else if("task-exists"===response.status)$("#status-update").text(response.message),$("#status-update").addClass("error");else if("success-edit-task"===response.status){$("#status-update").text(response.message),$("#status-update").addClass("success"),$(".right li").fadeIn();var replacement_file_input=$('<input type="file" name="task_files[]" multiple="multiple" class="file-input" />');$(".edit-task-form .file-input").replaceWith(replacement_file_input),$(".middle h1").text(response.data)}else if("success-change-task-status"===response.status)$("#status-update").text(response.message),$("#status-update").addClass("success"),$(".single-task-status").fadeOut();else if("success-projects-transferred"===response.status)$("#status-update").text(response.message),$("#status-update").addClass("success"),$(".transfer-projects").fadeOut();else if("failed-projects-transferred"===response.status)$("#status-update").text(response.message),$("#status-update").addClass("error");else if("success-project-extended"===response.status)$("#status-update").text(response.message),$("#status-update").addClass("success"),$(".side-notice").fadeOut(),$(".project-details .due-date").removeClass("overdue"),$(".project-details .due-date span").html('<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-calendar feather-icon" color="#ff9800"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect><line x1="16" y1="2" x2="16" y2="6"></line><line x1="8" y1="2" x2="8" y2="6"></line><line x1="3" y1="10" x2="21" y2="10"></line></svg>'+response.message);else if("success-claim-task"===response.status)$("#status-update").text("Task claimed: "+response.data),$("#status-update").addClass("success");else if("success-task-status-complete-time-enabled-wip"===response.status)$("#timer-stop").hide(),$("#timer-start").show(),$("#timer-start .timer span").removeClass("running"),$(".message-count").css("display","none"),$("#status-update").text(response.message),$("#status-update").addClass("success"),enableUI(),timer.pause();else if("success-task-status-complete"===response.status)$(".message-count").css("display","none"),$("#status-update").text(response.message),$("#status-update").addClass("success"),enableUI();else if("success-deleted-task"===response.status)$(".timer-ui, .task-in-progress, .right ul, .right .owner, .all-comments, #respond").remove(),$("#status-update").text(response.message),$("#status-update").addClass("success");else if("success-update-subtask-list"===response.status)$("#status-update").text(response.message),$("#status-update").addClass("success");else if("success-update-task-status"===response.status)$("#status-update").text(response.message),filter_counts(),$("#status-update").addClass("success");else if("success-added-fav"===response.status)$("#status-update").text(response.message),$("#status-update").addClass("success");else if("success-missed-time-added"===response.status)$("#status-update").text(response.message),$("#status-update").addClass("success"),window.location.href="?tab=time";else if("success-comment-deleted"===response.status)$("#status-update").text(response.message),$("#status-update").addClass("success"),$("#comment-"+response.data).fadeOut(500);else if("success-comment-delete-failed"===response.status)$("#status-update").text(response.message),$("#status-update").addClass("error");else if("success-comments-status-updated"===response.status)window.location.href=window.location.pathname;else if("success-removed-fav"===response.status)$("#status-update").text(response.message),$("#status-update").addClass("success");else if("success-gantt-pro-updated"===response.status)$(".gantt-pro-mask").removeClass("show"),$("#status-update").text(response.message),$("#status-update").addClass("success"),$(".update-gantt-pro-form #project_id, .update-gantt-pro-form #project_start_date, .update-gantt-pro-form #project_end_date, .update-gantt-pro-form #project_pc_complete, .update-gantt-pro-form #project_name, .update-gantt-pro-form #gantt_mode, .update-gantt-pro-form #task_id, .update-gantt-pro-form #task_start_date, .update-gantt-pro-form #task_end_date, .update-gantt-pro-form #task_pc_complete, .update-gantt-pro-form #task_name, .update-gantt-pro-form #gantt_mode").val("");else if("success-project-deleted"===response.status)$(".main-progress, .status-box, .gantt, .update-gantt-pro-form, .toggle-gantt-fs, .toggle-gantt-visibility, .tabby, .tips, .right, .projects-list .current, .middle h1, .project-description, .update-gantt-pro-form, .project-finished").fadeOut(),$("#status-update").text(response.message),$("#status-update").addClass("success");else if("success-task-deleted"===response.status)$(".edit-task-form, .middle h1, .message-count.clock, .right ul").fadeOut(),$("#status-update").text(response.message),filter_counts(),$("#status-update").addClass("success");else if("success-file-deleted"===response.status){$("#file-"+response.data).fadeOut(200);var new_files_count=+$(".tab-nav .files span").text()-1;$(".tab-nav .files span").text(new_files_count),$("#status-update").text(response.message),$("#status-update").addClass("success")}else if("success-project"===response.status){var newProjectCount=+$(".project-count").attr("data")+1;$(".project-count").text(newProjectCount),$(".main-nav ul").prepend(response.data),$('.new-project-form input[name="project_name"]').val(""),$('.new-project-form input[name="description"]').val(""),$('.new-project-form textarea[name="project_full_description"]').val(""),$('.new-project-form select[name="project_status"]').val(""),$('.new-project-form input[name="project_start_date"]').val(""),$('.new-project-form input[name="project_end_date"]').val(""),$('.new-project-form input[name="project_time_allocated"]').val(""),$('.new-project-form input[name="project_job_number"]').val(""),$('.new-project-form select[name="project_manager"]').val(""),$(".new-project-form .material-items li").remove(),$('.new-project-form select[name="task_group"]').val(""),$('.new-project-form select[name="task-ownership"]').val(""),$(".new-project-form .materials-tally").text(""),$("#status-update").text(response.message),$("#status-update").addClass("success")}else if("success-edit-project"===response.status){var newMessageCount=+$(".notify .message-count").text()+1;$(".notify .message-count").text(newMessageCount),$("#status-update").text(response.message),$("#status-update").addClass("success")}else if("success-archive-project"===response.status)$("#status-update").text(response.message),$("#status-update").addClass("success"),$(".project-page .middle, .right").css("filter","grayscale(100%)"),$(".project-page .middle, .right").css("pointer-events","none"),setTimeout(function(){$(".project-page .project-finished").fadeOut()},300),setTimeout(function(){$(".project-page .main-progress").fadeOut()},600),setTimeout(function(){$(".project-page .status-box").fadeOut()},900),setTimeout(function(){$(".project-page .tab-nav").fadeOut()},1200),setTimeout(function(){$(".project-page .update-task-status-form").fadeOut()},1500),setTimeout(function(){$(".project-page .right").fadeOut()},1800);else if("success-deleted-completed-project-tasks"===response.status)$("#status-update").text(response.message),$("#status-update").addClass("success"),setTimeout(function(){$(".tab-content li.complete").fadeOut()},300);else if("success-request-task-ownership"===response.status)$("#status-update").text(response.message),$("#status-update").addClass("success"),$(".right .notice form button").attr("disabled","disabled").css("opacity",".3");else if("task-takeover-decision"===response.status)$("#status-update").text(response.message),$("#status-update").addClass("success"),$(".middle .waiting-notification").removeClass("waiting").addClass("decided").fadeOut(1e3),location.reload();else if("success-message-read"===response.status){$(".message-"+response.data).closest("div").fadeOut(100),(message_count=$(".notify .message-count").text())<1?(message_count=1,$("header .icons b").addClass("fade"),$("header .icons .message-count").remove(),$(".notifications").remove()):message_count=message_count,setTimeout(function(){$(".notify .message-count").text(message_count-1)},250),$("#status-update").text(response.message),$("#status-update").addClass("success")}else if("success-kanban-arranged"===response.status)$("#status-update").text(response.message),$("#status-update").addClass("success");else if("success-timer-started"===response.status){$(".side-form.change-task-status").addClass("disabled"),$("#status-update").text(response.message),$("#status-update").addClass("success"),$(".timer span").addClass("running"),$(".timer-start").hide(),$(".timer-stop").show(),$(this).attr("disabled");var message=$(".task-in-progress").attr("data");$(".work-in-progress div").text(message),$(".task-in-progress .message-count").addClass("clock").show(),$(".waiting-notification .approve").css("pointer-events","none").css("opacity",".3"),$(".tab-nav li").removeClass("active"),$(".tab-nav .task-time").addClass("active"),$(".tab-content").removeClass("active"),$(".tab-content-task-time").addClass("active"),$(".task-time").removeClass("fade"),$(".side-form-box label input").prop("checked",!1),$('.side-form-box label input[value="in-progress"]').prop("checked",!0),$(".side-form-box label").removeClass("selected"),$('.side-form-box label input[value="in-progress"]').closest("label").addClass("selected"),setTimeout(function(){$("#change-task-status").submit()},500);$(".task-time em").text(),$(".current-user-data").data("name"),$(".current-user-data").data("avatar"),$(".current-user-data").data("date")}else if("success-timer-stopped"===response.status)timer.pause(),$(".side-form.change-task-status").removeClass("disabled"),$("#status-update").text(response.message),$("#status-update").addClass("success"),$(".task-in-progress .message-count, .work-in-progress").hide(),$(".timer span").removeClass("running"),$(".work-in-progress div").text(""),window.location.href=window.location.pathname+"?tab=time";else if("success-time-deleted"===response.status)$("#status-update").text(response.message),$("#status-update").addClass("success"),$(".edit-time-form li .delete-time").removeClass("deleting-in-progress"),window.location.href=window.location.pathname+"?tab=time";else if("success-time-edited"===response.status)$("#status-update").text(response.message),$("#status-update").addClass("success"),window.location.href=window.location.pathname+"?tab=time";else if("success-time-edit-failed"===response.status)$("#status-update").text(response.message),$("#status-update").addClass("alert");else if("failed-timer-started"===response.status)$("#status-update").text(response.message),$("#status-update").addClass("error"),$(".timer span").removeClass("running"),timer.pause(),$(".timer-ui .task-time em").text("00:00:00");else if("success-followed-task"===response.status){$(".follow-task-"+response.data).closest("div").fadeOut(100),(message_count=$(".my-favs .message-count.follows").text())<1?(message_count=1,$("header .icons .my-favs b").addClass("fade"),$("header .icons .my-favs .message-count.follows").remove(),$(".my-follows").remove()):message_count=message_count,setTimeout(function(){$(".my-favs .message-count.follows").text(parseFloat(message_count)+parseFloat(1))},250),$("#status-update").text(response.message),$("#status-update").addClass("success")}else if("success-unfollowed-task"===response.status){var message_count;$(".follow-task-"+response.data).closest("div").fadeOut(100),(message_count=$(".my-favs .message-count.follows").text())<1?(message_count=1,$("header .icons .my-favs b").addClass("fade"),$("header .icons .my-favs .message-count.follows").remove(),$(".my-follows").remove()):message_count=message_count,setTimeout(function(){$(".my-favs .message-count.follows").text(parseFloat(message_count)-parseFloat(1))},250),$("#status-update").text(response.message),$("#status-update").addClass("success")}else"complete-onboarding"===response.status?($("#status-update").text(response.message),location.reload()):"error"===response.status?($("#status-update").text(response.message),$("#status-update").addClass("error")):"success-messages-read"===response.status?($(".message-count").text("0"),$(".notifications.dropdown").fadeOut(),$(".notifications.dropdown div").fadeOut(),$(".notifications.dropdown h3 em").fadeOut(),setTimeout(function(){$(".notifications.dropdown").removeAttr("style")},500),$("#status-update").text(response.message),$("#status-update").addClass("success")):($("#status-update").text(response.message),$("#status-update").addClass("alert"))}var response;$("form").on("submit",function(e){$("#status-update").hide(),$(".working").addClass("rotate")}),$("#account-form").on("submit",function(e){e.preventDefault();var formData=!1;if(window.FormData){if(-1!=navigator.userAgent.indexOf("Safari")&&-1==navigator.userAgent.indexOf("Chrome")){var $inputs=$('input[type="file"]:not([disabled])',$(this));$inputs.each(function(_,input){if(0<input.files.length)return $(input).prop("disabled",!0)})}formData=new FormData($(this)[0]),-1!=navigator.userAgent.indexOf("Safari")&&-1==navigator.userAgent.indexOf("Chrome")&&$inputs.prop("disabled",!1),formData.append("nonce",inputs.nonce),formData.append("action","update_user_details")}else formData=$(this).serialize(),formData+="&nonce="+inputs.nonce,formData+="&action=update_user_details";return disableUI(),$.ajax({url:inputs.ajaxurl,cache:!1,type:"POST",data:formData,processData:!1,contentType:!1,success:function(response){ResponseSuccess(response),$(".working").removeClass("rotate"),enableUI()}}),!1}),$("#projects-transfer-form").on("submit",function(e){return e.preventDefault(),disableUI(),$.post(inputs.ajaxurl,{action:"transfer_projects",nonce:inputs.nonce,post:$(this).serialize()},function(response){ResponseSuccess(response),$(".working").removeClass("rotate"),enableUI()}),!1}),$("#switch-theme-form").on("submit",function(e){return e.preventDefault(),disableUI(),$.post(inputs.ajaxurl,{action:"change_theme",nonce:inputs.nonce,post:$(this).serialize()},function(response){ResponseSuccess(response),$(".working").removeClass("rotate"),$("#switch-theme-form").addClass("switch-theme-form-facade"),enableUI()}),!1}),$("#manage-files").on("submit",function(e){return e.preventDefault(),disableUI(),$.post(inputs.ajaxurl,{action:"manage_files",nonce:inputs.nonce,post:$(this).serialize()},function(response){ResponseSuccess(response),$(".working").removeClass("rotate"),enableUI()}),!1}),$("#new-project-form").on("submit",function(e){return e.preventDefault(),disableUI(),$.post(inputs.ajaxurl,{action:"add_new_project",nonce:inputs.nonce,post:$(this).serialize()},function(response){ResponseSuccess(response),$(".working").removeClass("rotate"),enableUI()}),!1}),$("#extend-project-deadline").on("submit",function(e){return e.preventDefault(),disableUI(),$.post(inputs.ajaxurl,{action:"extend_project_deadline",nonce:inputs.nonce,post:$(this).serialize()},function(response){ResponseSuccess(response),$(".working").removeClass("rotate"),enableUI()}),!1}),$("#archive-project").on("submit",function(e){return e.preventDefault(),disableUI(),$.post(inputs.ajaxurl,{action:"archive_project",nonce:inputs.nonce,post:$(this).serialize()},function(response){ResponseSuccess(response),$(".working").removeClass("rotate"),enableUI()}),!1}),$("#delete-completed-project-tasks").on("submit",function(e){return e.preventDefault(),disableUI(),$.post(inputs.ajaxurl,{action:"delete_completed_project_tasks",nonce:inputs.nonce,post:$(this).serialize()},function(response){ResponseSuccess(response),$(".working").removeClass("rotate"),enableUI()}),!1}),$("#update-gantt-pro-form").on("submit",function(e){return e.preventDefault(),disableUI(),$.post(inputs.ajaxurl,{action:"update_gantt_pro",nonce:inputs.nonce,post:$(this).serialize()},function(response){ResponseSuccess(response),$(".working").removeClass("rotate"),enableUI()}),!1}),$("#edit-project-form").on("submit",function(e){return e.preventDefault(),disableUI(),$.post(inputs.ajaxurl,{action:"edit_project",nonce:inputs.nonce,post:$(this).serialize()},function(response){ResponseSuccess(response),$(".working").removeClass("rotate"),enableUI()}),!1}),$("#delete-project-form").on("submit",function(e){return e.preventDefault(),disableUI(),$.post(inputs.ajaxurl,{action:"delete_project",nonce:inputs.nonce,post:$(this).serialize()},function(response){ResponseSuccess(response),$(".working").removeClass("rotate"),enableUI()}),!1}),$("#delete-task-form").on("submit",function(e){return e.preventDefault(),disableUI(),$.post(inputs.ajaxurl,{action:"delete_task",nonce:inputs.nonce,post:$(this).serialize()},function(response){ResponseSuccess(response),$(".working").removeClass("rotate"),enableUI()}),!1}),$("#new-task-form").on("submit",function(e){e.preventDefault(),disableUI();var ajaxurl=$("#ajax_url").val(),form_data=$("#new-task-form")[0],Form=new FormData(form_data),file_upload=$("#task_files").files;return Form.append("file",file_upload),Form.append("action","add_new_task"),$.ajax({cache:!1,url:ajaxurl,type:"post",data:Form,processData:!1,contentType:!1,success:function(response){ResponseSuccess(response),$(".working").removeClass("rotate"),enableUI()}}),!1}),$("#edit-task-form").on("submit",function(e){e.preventDefault(),disableUI();var ajaxurl=$("#ajax_url").val(),form_data=$("#edit-task-form")[0],Form=new FormData(form_data),file_upload=$("#task_files").files;return Form.append("file",file_upload),Form.append("action","edit_task"),$.ajax({cache:!1,url:ajaxurl,type:"post",data:Form,processData:!1,contentType:!1,success:function(response){ResponseSuccess(response),$(".working").removeClass("rotate"),enableUI()}}),!1}),$("#delete-file").on("submit",function(e){return e.preventDefault(),disableUI(),$.post(inputs.ajaxurl,{action:"delete_file",nonce:inputs.nonce,post:$(this).serialize()},function(response){ResponseSuccess(response),$(".working").removeClass("rotate"),enableUI()}),!1}),$("#comment-threads-form").on("submit",function(e){return e.preventDefault(),disableUI(),$.post(inputs.ajaxurl,{action:"delete_comment",nonce:inputs.nonce,post:$(this).serialize()},function(response){ResponseSuccess(response),$(".working").removeClass("rotate"),enableUI()}),!1}),$("#comment-status-form").on("submit",function(e){return e.preventDefault(),disableUI(),$.post(inputs.ajaxurl,{action:"comment_status",nonce:inputs.nonce,post:$(this).serialize()},function(response){ResponseSuccess(response),$(".working").removeClass("rotate"),enableUI()}),!1}),$("#edit-time-form").on("submit",function(e){return e.preventDefault(),disableUI(),$.post(inputs.ajaxurl,{action:"delete_time",nonce:inputs.nonce,post:$(this).serialize()},function(response){ResponseSuccess(response),$(".working").removeClass("rotate"),enableUI()}),!1}),$("#change-task-status").on("submit",function(e){return e.preventDefault(),disableUI(),$.post(inputs.ajaxurl,{action:"change_task_status",nonce:inputs.nonce,post:$(this).serialize()},function(response){ResponseSuccess(response),$(".working").removeClass("rotate"),enableUI()}),!1}),$("#arrange-kanban").on("submit",function(e){return e.preventDefault(),disableUI(),$.post(inputs.ajaxurl,{action:"kanban_arranged",nonce:inputs.nonce,post:$(this).serialize()},function(response){ResponseSuccess(response),$(".working").removeClass("rotate"),enableUI()}),!1}),$("#update-subtask-list").on("submit",function(e){return e.preventDefault(),$.post(inputs.ajaxurl,{action:"update_subtask_list",nonce:inputs.nonce,post:$(this).serialize()},function(response){ResponseSuccess(response),$(".working").removeClass("rotate")}),!1}),$(".update-task-status-form").on("submit",function(e){return e.preventDefault(),$.post(inputs.ajaxurl,{action:"update_task_status",nonce:inputs.nonce,post:$(this).serialize()},function(response){ResponseSuccess(response),$(".working").removeClass("rotate")}),!1}),$(".claim-task-form").on("submit",function(e){return e.preventDefault(),disableUI(),$.post(inputs.ajaxurl,{action:"claim_task",nonce:inputs.nonce,post:$(this).serialize()},function(response){ResponseSuccess(response),$(".working").removeClass("rotate"),enableUI()}),!1}),$("#request-task-takeover-form").on("submit",function(e){return e.preventDefault(),disableUI(),$.post(inputs.ajaxurl,{action:"request_task_takeover",nonce:inputs.nonce,post:$(this).serialize()},function(response){ResponseSuccess(response),$(".working").removeClass("rotate"),enableUI()}),!1}),$(".mark-message-read").on("submit",function(e){return e.preventDefault(),$.post(inputs.ajaxurl,{action:"mark_message_read",nonce:inputs.nonce,post:$(this).serialize()},function(response){ResponseSuccess(response),$(".working").removeClass("rotate")}),!1}),$("#transfer-task-ownership").on("submit",function(e){return e.preventDefault(),disableUI(),$.post(inputs.ajaxurl,{action:"transfer_task_ownership",nonce:inputs.nonce,post:$(this).serialize()},function(response){ResponseSuccess(response),$(".working").removeClass("rotate"),enableUI()}),!1}),$("#timer-start").on("submit",function(e){return e.preventDefault(),$.post(inputs.ajaxurl,{action:"start_timer",nonce:inputs.nonce,post:$(this).serialize()},function(response){ResponseSuccess(response),$(".working").removeClass("rotate"),$(".task-in-progress .timer").addClass("spin")}),!1}),$("#timer-stop").on("submit",function(e){return e.preventDefault(),$.post(inputs.ajaxurl,{action:"stop_timer",nonce:inputs.nonce,post:$(this).serialize()},function(response){ResponseSuccess(response),$(".working").removeClass("rotate"),$(".task-in-progress .timer").removeClass("spin")}),!1}),$("#add-missed-time").on("submit",function(e){return e.preventDefault(),$.post(inputs.ajaxurl,{action:"add_missed_time",nonce:inputs.nonce,post:$(this).serialize()},function(response){ResponseSuccess(response),$(".working").removeClass("rotate")}),!1}),$("#task-follow, #follows-form").on("submit",function(e){return e.preventDefault(),$.post(inputs.ajaxurl,{action:"task_follow_status",nonce:inputs.nonce,post:$(this).serialize()},function(response){ResponseSuccess(response),$(".working").removeClass("rotate")}),!1}),$("#onboarding").on("submit",function(e){return e.preventDefault(),$.post(inputs.ajaxurl,{action:"complete_onboarding",nonce:inputs.nonce,post:$(this).serialize()},function(response){ResponseSuccess(response),$(".working").removeClass("rotate")}),!1}),$("#read-all-messages-form").on("submit",function(e){return e.preventDefault(),$.post(inputs.ajaxurl,{action:"read_all_messages",nonce:inputs.nonce,post:$(this).serialize()},function(response){ResponseSuccess(response),$(".working").removeClass("rotate")}),!1})});